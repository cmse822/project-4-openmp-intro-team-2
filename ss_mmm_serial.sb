#!/bin/bash

JOB_NAME="MMM_serial"

#SBATCH --job-name="$JOB_NAME"
#SBATCH --output="$JOB_NAME.out"
#SBATCH --time=00:10:00
#SBATCH --mem=100MB
#SBATCH --ntasks=1

# Change directory 
cd "$SLURM_SUBMIT_DIR"

# Compile Program
g++ -std=c++11 src/matrix_multiplication.cpp -o "$JOB_NAME"

# Run program
MATRIX_SIZE=(20 100 1000)

export OMP_NUM_THREADS=1
for SIZE in "${MATRIX_SIZE[@]}"; do 
    ./"$JOB_NAME" $SIZE "data/$JOB_NAME.csv"
done

rm "$JOB_NAME"
